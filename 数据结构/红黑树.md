[TOC]

# 红黑树

红黑树有以下几个性质：

1. 结点是红色或黑色。
2. 根结点是黑色。

3. 每个叶子结点都是黑色的空结点（NIL 结点）。

4. 每个红色结点的两个子结点都是黑色（从每个叶子到根的所有路径上不能有两个连续的红色结点）。

5. 从任一结点到其每个叶子的所有路径都包含相同数目的黑色结点。

有了上面的几个性质作为限制，即可避免二叉查找树退化成单链表的情况。

但是，仅仅避免这种情况还不够，这里还要考虑某个节点到其每个叶子节点路径长度的问题。

如果某些路径长度过长，那么，在对这些路径上的及诶单进行增删查操作时，效率也会大大降低。

这个时候性质 4 和性质 5 用途就凸显了，有了这两个性质作为约束，即可保证任意节点到其每个叶子节点路径最长不会超过最短路径的 2 倍。原因如下：

当某条路径最短时，这条路径必然都是由黑色节点构成。当某条路径长度最长时，这条路径必然是由红色和黑色节点相间构成（性质 4 限定了不能出现两个连续的红色节点）。而性质 5 又限定了从任一节点到其每个叶子节点的所有路径必须包含相同数量的黑色节点。

此时，在路径最长的情况下，路径上**红色节点数量 = 黑色节点数量**。该路径长度为两倍黑色节点数量，也就是最短路径长度的 2 倍。

## 变色和旋转

节点的插入和删除会破坏红黑树的规则，所以我们要进行调整，调整的方式有两种：变色和旋转。而旋转又包含两种方式：左旋转和右旋转。

- 变色

为了重新符合红黑树的规则，尝试把红色结点变为黑色，或者把黑色结点变为红色。

- 左旋转
- 右旋转

## 参考文章

- [漫画：什么是红黑树？](https://zhuanlan.zhihu.com/p/143396578)

